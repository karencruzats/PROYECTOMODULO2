<!DOCTYPE html>
<html lang="es"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet - Depositar</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<style>
        body { background-color: #c8ebf1; padding-top: 50px;font-family: 'Courier New', Courier, monospace; text-align: center; font-weight: bold;}
       h2{font-weight: bolder;}
      

</style>
</head>
<body>

<div class="container mt-5" style="max-width: 500px;">
 <h2 class="titulo">Depositar Dinero</h2>
    <div id="alertMensaje" class="alert" style="display: none;"></div>
    <div class="card p-4">
    <form id="depositForm">
    <div class="form-group">
    <label for="inputDeposito" > ¿Quieres depositar?</label>
    <br>
    <input type="number" class="form-control" id="inputDeposito" placeholder="Ingresa el Monto" min="1" required="">
    <br>
    </div>
    <button type="submit" class="btn btn-success btn-lg btn-block mb-2">Realizar Depósito</button>
    </form>
    </div>
    <a href="menu.html" class="btn btn-dark btn-lg btn-block mb-2">Volver al Menú Principal</a>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function() {
            var saldoActual = localStorage.getItem('walletSaldo');
            if(saldoActual === null) {
                saldoActual = 0;
            } else {
                saldoActual = parseInt(saldoActual); 
            }

            $('#depositForm').submit(function(evento) {
                evento.preventDefault();
                var montoIngresado = $('#inputDeposito').val();
                var montoNumero = parseInt(montoIngresado);

                if(montoNumero > 0) {
                    // 1. Sumar Saldo
                    var nuevoSaldo = saldoActual + montoNumero;
                    localStorage.setItem('walletSaldo', nuevoSaldo);
                    
                    // 2. Guardar en Historial
                    var historial = JSON.parse(localStorage.getItem('walletHistorial')) || [];
                    
                    var movimiento = {
                        tipo: 'Depósito',
                        descripcion: 'Recibido en mi cuenta',
                        monto: montoNumero,
                        fecha: new Date().toLocaleDateString(),
                        esIngreso: true 
                    };

                    historial.unshift(movimiento);
                    localStorage.setItem('walletHistorial', JSON.stringify(historial));

                    // 3. Feedback
                    $('#alertMensaje').removeClass('alert-danger').addClass('alert-success');
                    $('#alertMensaje').text('¡Depósito exitoso! Nuevo saldo: $' + nuevoSaldo);
                    $('#alertMensaje').slideDown();
                    $('#inputDeposito').val('');
                    
                    saldoActual = nuevoSaldo;

                } else {
                    $('#alertMensaje').removeClass('alert-success').addClass('alert-danger');
                    $('#alertMensaje').text('El monto debe ser mayor a 0');
                    $('#alertMensaje').slideDown();
                }
            });
        });
    </script>

</body></html>